#!/bin/bash

FILE="/etc/lightdm/lightdm.conf"
BACKUP="/etc/lightdm/lightdm.conf.bak"
util=${SUDO_USER:-$USER}

# Sauvegarde
sudo cp "$FILE" "$BACKUP"

# Supprime toute ancienne ligne autologin dans la section [SeatDefaults]
sudo sed -i '/^autologin-user=/d' "$FILE"
sudo sed -i '/^autologin-user-timeout=/d' "$FILE"
sudo sed -i '/^autologin-session=/d' "$FILE"

# Ajoute les lignes aprÃ¨s la section [SeatDefaults]
sudo sed -i "/^\[SeatDefaults\]/a autologin-user=$util\nautologin-user-timeout=0\nautologin-session=lightdm-autologin" "$FILE"

echo "âœ… Autologin activÃ© pour lâ€™utilisateur : $util"
echo "ðŸ”’ Fichier original sauvegardÃ© dans : $BACKUP"
